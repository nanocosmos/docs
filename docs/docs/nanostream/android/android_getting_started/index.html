<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>nanostream/android/android_getting_started · nanocosmos Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Introduction"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="nanostream/android/android_getting_started · nanocosmos Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://nanocosmos.github.io/docs/"/><meta property="og:description" content="## Introduction"/><meta property="og:image" content="https://nanocosmos.github.io/docs/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://nanocosmos.github.io/docs/img/docusaurus.png"/><link rel="shortcut icon" href="/docs/img/favicon_nano.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-552140-1', 'auto');
              ga('send', 'pageview');
            </script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/search.js"></script><script src="/docs/js/scrollSpy.js"></script><link rel="stylesheet" href="/docs/css/main.css"/><script src="/docs/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/docs/"><img class="logo" src="/docs/img/nanocosmos_header_logo.png" alt="nanocosmos Documentation"/><h2 class="headerTitleWithLogo">nanocosmos Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/docs/cloud/cloud_overview" target="_self">nanoStream Cloud</a></li><li class=""><a href="/docs/docs/nanoplayer/nanoplayer_introduction" target="_self">H5Live Player</a></li><li class=""><a href="/docs/docs/webrtc/nanostream_webrtc_introduction" target="_self">nanoStream Webcaster</a></li><li class=""><a href="/docs/docs/nanostream/nanostream" target="_self">nanoStream Apps and SDKs</a></li><li class=""><a href="/docs/docs/samples/samples" target="_self">Samples</a></li><li class=""><a href="/docs/docs/faq/faq_streaming" target="_self">FAQ</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/nanocosmos/docs/tree/master/docs/nanostream/android/android_getting_started.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">nanostream/android/android_getting_started</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<h3><a class="anchor" aria-hidden="true" id="purpose"></a><a href="#purpose" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Purpose</h3>
<p>This documentation is about the nanoStream SDK for Android and can be used by software developers to integrate nanoStream RTMP Live Video Encoding and Playback into custom apps.</p>
<blockquote>
<p>For using our web-based Ultra-Low-Latency Live Streaming Technology H5Live, please check our <a href="../cloud/cloud_overview">nanoStream Cloud and H5Live Documentation</a></p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="requirements"></a><a href="#requirements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requirements</h3>
<ul>
<li>Android 4.1+ (API Level 16)</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="required-permissions"></a><a href="#required-permissions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Required permissions:</h4>
<p>The nanoStream SDK for android does not request any permissions by itself.
However, it needs a few permissions to work.</p>
<p>The needed permissions are :</p>
<ul>
<li>android.permission.INTERNET - This is needed since the stream should be sent over a network.</li>
<li>android.permission.RECORD_AUDIO - In case your stream is not video-only the app needs this permission to record audio data using the microphone.</li>
<li>android.permission.RECORD_VIDEO - In case your stream is not audio-only the app needs this permission to record image data using the camera.</li>
<li>android.permission.WRITE_EXTERNAL_STORAGE - In case the encoded stream should be written on the phone's memory.</li>
</ul>
<p>How these permissions should be requested depends on the used version of android.</p>
<p>On devices with android versions prior to Android 6.0 the permissions are getting requested once per app installation. They just need to be configured within the AndroidManifest.xml file, so that the user can give the permission while installing the app.</p>
<p>On devices with android versions from 6.0 upwards the permissions should be requested at run time when needed. It can be checked whether a permission is already granted or not. Afterwards, the needed permissions can be requested. This will create a pop-up, which asks the user to grant the needed permissions. If you are working with our BinutStreamer-Sample, an example of this can be found in the CheckAppPermission-Class.</p>
<h3><a class="anchor" aria-hidden="true" id="getting-started"></a><a href="#getting-started" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Started</h3>
<h4><a class="anchor" aria-hidden="true" id="copy-the-sdk-libraries-into-your-android-studio-project"></a><a href="#copy-the-sdk-libraries-into-your-android-studio-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Copy the SDK libraries into your Android Studio project</h4>
<p>Add the <code>net.nanocosmos.nanoStream.jar</code> java component to your Android Studio project by copying <code>[SDK]/libs/net.nanocosmos.nanoStream.jar</code> to the folder <code>[projectpath]/app/libs/net.nanocosmos.nanoStream.jar</code> Add the <code>nanoStream.so</code> native components to the Android Studio project by copying the 5 folders <code>[SDK]/libs/[platform]/libRTMPStream.so</code> to [projectpath]/app/src/main/jniLibs/[platform]/libRTMPStream.so`</p>
<p>Platforms are armeabi, armeabi-v7a, arm64-v8a, x86, mips</p>
<h4><a class="anchor" aria-hidden="true" id="add-the-nanostream-to-the-gradle-file"></a><a href="#add-the-nanostream-to-the-gradle-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add the nanoStream to the gradle file</h4>
<p>Open the build.gradle file (Module:app) and add</p>
<pre><code class="hljs"><span class="hljs-variable">compile</span> <span class="hljs-function"><span class="hljs-title">files</span>(<span class="hljs-string">'libs/net.nanocosmos.nanoStream.jar'</span>)</span>
</code></pre>
<p>to the dependencies section.</p>
<h4><a class="anchor" aria-hidden="true" id="check-library-version"></a><a href="#check-library-version" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Check library version</h4>
<pre><code class="hljs css language-java">String nanoStreamVersion = nanoStream.getVersion().fullVersion;
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="initialize-the-library"></a><a href="#initialize-the-library" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initialize the library</h4>
<p>Implement the interface &quot;nanoStreamEventListener&quot; in your class:</p>
<pre><code class="hljs css language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StreamActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">NanostreamEventListener</span> </span>{
  <span class="hljs-comment">// implement your class</span>

  <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NotificationRunable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>{
     <span class="hljs-keyword">private</span> NanostreamEvent m_event;

     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NotificationRunable</span><span class="hljs-params">(NanostreamEvent event)</span> </span>{
      m_event = event;
     }

     <span class="hljs-meta">@Override</span>
     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
       Toast.makeText(getApplicationContext(), m_event.GetDescription(), Toast.LENGTH_SHORT).show();
     }
   }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNanostreamEvent</span><span class="hljs-params">(NanostreamEvent event)</span> </span>{
    <span class="hljs-keyword">if</span> (event.GetType() != NanostreamEvent.TYPE_RTMP_QUALITY) {
      <span class="hljs-keyword">this</span>.runOnUiThread(<span class="hljs-keyword">new</span> NotificationRunable(event));
    }
  }
}
</code></pre>
<p>Configure the nanoStreamSettings object for the library:</p>
<pre><code class="hljs css language-java">  <span class="hljs-keyword">private</span> String license = <span class="hljs-string">"--- add your nanoStream license here ---"</span>;
  <span class="hljs-keyword">private</span> String serverUrl = <span class="hljs-string">"rtmp://example.org/live"</span>;
  <span class="hljs-keyword">private</span> String streamName = <span class="hljs-string">"myStream"</span>;
  <span class="hljs-keyword">private</span> nanoStream streamLib = <span class="hljs-keyword">null</span>;

  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">initStreamLib</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> == streamLib) {
      nanoStreamSettings nss = <span class="hljs-keyword">new</span> nanoStreamSettings();
      nss.setLicense(license);
      nss.setLogSettings(logSettings);
      nss.setStreamUrl(serverUrl);
      nss.setStreamName(streamName);
      nss.setEventListener(<span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">try</span> {
        streamLib = <span class="hljs-keyword">new</span> nanoStream(nss);
      } <span class="hljs-keyword">catch</span> (NanostreamException en) {
        Toast.makeText(getApplicationContext(), en.toString(), Toast.LENGTH_LONG).show();
      }

      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> != streamLib) {
        <span class="hljs-keyword">try</span> {
          streamLib.init();
        } <span class="hljs-keyword">catch</span> (NanostreamException e) {
          Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
        } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
          e.printStackTrace();
        }
      }
    }
  }
</code></pre>
<p>Start/Stop the Stream:</p>
<pre><code class="hljs css language-java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toggleStreaming</span><span class="hljs-params">(View clicked)</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">null</span> == streamLib) {
    Toast.makeText(getApplicationContext(), <span class="hljs-string">"nanoStream failed to initialize"</span>, Toast.LENGTH_LONG).show();
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">if</span> (!streamLib.hasState(nanoStream.EncoderState.RUNNING)) {
    Toast.makeText(getApplicationContext(), <span class="hljs-string">"Starting..."</span>, Toast.LENGTH_SHORT).show();

    <span class="hljs-keyword">if</span> (streamLib.hasState(nanoStream.EncoderState.STOPPED) || streamLib.hasState(nanoStream.EncoderState.CREATED)) {
      <span class="hljs-keyword">try</span> {
        Logging.log(Logging.LogLevel.DEBUG, TAG, <span class="hljs-string">"toggleStreaming init nanoStream"</span>);
        streamLib.init();
      } <span class="hljs-keyword">catch</span> (NanostreamException en) {
        Toast.makeText(getApplicationContext(), en.toString(), Toast.LENGTH_LONG).show();
        <span class="hljs-keyword">return</span>;
      }
    }

    <span class="hljs-keyword">try</span> {
      streamLib.start();
    } <span class="hljs-keyword">catch</span> (NanostreamException en) {
      Toast.makeText(getApplicationContext(), en.toString(), Toast.LENGTH_LONG).show();
      <span class="hljs-keyword">return</span>;
    }
  } <span class="hljs-keyword">else</span> {
    Toast.makeText(getApplicationContext(), <span class="hljs-string">"Stopping..."</span>, Toast.LENGTH_SHORT).show();
    streamLib.stop();
  }
}
</code></pre>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2/2/2021</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#introduction">Introduction</a><ul class="toc-headings"><li><a href="#purpose">Purpose</a></li><li><a href="#requirements">Requirements</a></li><li><a href="#getting-started">Getting Started</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Contact</h5><a href="https://www.nanocosmos.de/">Homepage</a><a href="https://www.nanocosmos.de/contact">Contact</a><a href="https://www.nanocosmos.de/support">Support</a><a href="https://www.nanocosmos.de/terms">Legal Terms</a></div><div><h5>Products</h5><a href="https://www.nanocosmos.de/cloud">Nanostream Cloud with Bintu.Live</a><a href="https://www.nanocosmos.de/h5live">H5Live Low Latency HTML5-Player</a><a href="https://www.nanocosmos.de/webrtc">nanoStream Webcaster</a><a href="https://www.nanocosmos.de/#nanostream">Nanostream Apps and SDK</a></div><div><h5>More</h5><a href="https://www.nanocosmos.de/blog/">Blog</a><a href="https://twitter.com/nanovideo">Twitter</a><a href="https://www.facebook.com/nanocosmos.net/">Facebook</a><a href="https://www.linkedin.com/company/nanocosmos-gmbh">LinkedIn</a><a href="https://github.com/nanocosmos/docs">GitHub</a><a class="github-button" href="https://github.com/nanocosmos/docs" data-icon="octicon-star" data-count-href="/nanocosmos/docs/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://nanocosmos.de/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/docs/img/footer_logo.png" alt="nanocosmos GmbH" width="170" height="45"/></a><section class="copyright">Copyright © 2021 nanocosmos GmbH</section></footer></div></body></html>