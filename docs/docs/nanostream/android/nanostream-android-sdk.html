<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>SDK for Android · nanocosmos Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="## Introduction"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="SDK for Android · nanocosmos Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://docs.nanocosmos.de/"/><meta property="og:description" content="## Introduction"/><meta property="og:image" content="https://docs.nanocosmos.de/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://docs.nanocosmos.de/img/docusaurus.png"/><link rel="shortcut icon" href="/img/favicon_nano.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-552140-1', 'auto');
              ga('send', 'pageview');
            </script><link rel="stylesheet" href="/css/copy-button.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/copy-button.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/search.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/nanocosmos_header_logo.png" alt="nanocosmos Documentation"/><h2 class="headerTitleWithLogo">nanocosmos Documentation</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/cloud/cloud_overview" target="_self">nanoStream Cloud</a></li><li class=""><a href="/docs/nanoplayer/nanoplayer_introduction" target="_self">H5Live Player</a></li><li class=""><a href="/docs/webrtc/nanostream_webrtc_introduction" target="_self">nanoStream Webcaster</a></li><li class=""><a href="/docs/nanomeet/introduction" target="_self">nanoMeet</a></li><li class=""><a href="/docs/nanostream/nanostream" target="_self">nanoStream Apps and SDKs</a></li><li class=""><a href="/docs/samples/samples" target="_self">Samples</a></li><li class=""><a href="/docs/faq/faq_streaming" target="_self">FAQ</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/nanocosmos/docs/tree/master/docs/nanostream/android/nanostream-android-sdk.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">SDK for Android</h1></header><article><div><span><h2><a class="anchor" aria-hidden="true" id="introduction"></a><a href="#introduction" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Introduction</h2>
<h3><a class="anchor" aria-hidden="true" id="purpose"></a><a href="#purpose" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Purpose</h3>
<p>This documentation is about the nanoStream Live Video Streaming SDK for Android and can be used by software developers to integrate nanoStream Live Video Encoding into custom apps.</p>
<h3><a class="anchor" aria-hidden="true" id="requirements"></a><a href="#requirements" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Requirements</h3>
<ul>
<li>Android 4.1+ (API Level 16)</li>
</ul>
<h4><a class="anchor" aria-hidden="true" id="required-permissions"></a><a href="#required-permissions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Required permissions</h4>
<p>The nanoStream SDK for android does not request any permissions by itself.
However, it needs a few permissions to work.</p>
<p>The needed permissions are :</p>
<ul>
<li><code>android.permission.INTERNET</code> - This is needed since the stream should be sent over a network.</li>
<li><code>android.permission.RECORD_AUDIO</code> - In case your stream is not video-only the app needs this permission to record audio data using the microphone.</li>
<li><code>android.permission.RECORD_VIDEO</code> - In case your stream is not audio-only the app needs this permission to record image data using the camera.</li>
<li><code>android.permission.WRITE_EXTERNAL_STORAGE</code> - In case the encoded stream should be written on the phone's memory.</li>
</ul>
<p>How these permissions should be requested depends on the used version of android.</p>
<p>On devices with android versions prior to Android 6.0 the permissions are getting requested once per app installation. They just need to be configured within the <code>AndroidManifest.xml</code> file, so that the user can give the permission while installing the app.</p>
<p>On devices with android versions from 6.0 upwards the permissions should be requested at run time when needed. It can be checked whether a permission is already granted or not. Afterwards, the needed permissions can be requested. This will create a pop-up, which asks the user to grant the needed permissions. If you are working with our BinutStreamer-Sample, an example of this can be found in the CheckAppPermission-Class.</p>
<h3><a class="anchor" aria-hidden="true" id="getting-started"></a><a href="#getting-started" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Getting Started</h3>
<h4><a class="anchor" aria-hidden="true" id="copy-the-sdk-libraries-into-your-android-studio-project"></a><a href="#copy-the-sdk-libraries-into-your-android-studio-project" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Copy the SDK libraries into your Android Studio project</h4>
<p>Add the <code>net.nanocosmos.nanoStream.jar</code> java component to your Android Studio project by copying <code>[SDK]/libs/net.nanocosmos.nanoStream.jar</code> to the folder <code>[projectpath]/app/libs/net.nanocosmos.nanoStream.jar</code> Add the <code>nanoStream.so</code> native components to the Android Studio project by copying the 5 folders <code>[SDK]/libs/[platform]/libRTMPStream.so</code> to [projectpath]/app/src/main/jniLibs/[platform]/libRTMPStream.so`</p>
<p>Platforms are armeabi, armeabi-v7a, arm64-v8a, x86, mips</p>
<h4><a class="anchor" aria-hidden="true" id="add-the-nanostream-to-the-gradle-file"></a><a href="#add-the-nanostream-to-the-gradle-file" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Add the nanoStream to the gradle file</h4>
<p>Open the <code>build.gradle</code> file (Module:app) and add</p>
<pre><code class="hljs"><span class="hljs-variable">compile</span> <span class="hljs-function"><span class="hljs-title">files</span>(<span class="hljs-string">'libs/net.nanocosmos.nanoStream.jar'</span>)</span>
</code></pre>
<p>to the dependencies section.</p>
<h4><a class="anchor" aria-hidden="true" id="check-library-version"></a><a href="#check-library-version" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Check library version</h4>
<pre><code class="hljs css language-java">String nanoStreamVersion = nanoStream.getVersion().fullVersion;
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="initialize-the-library"></a><a href="#initialize-the-library" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Initialize the library</h4>
<p>Implement the interface &quot;nanoStreamEventListener&quot; in your class:</p>
<pre><code class="hljs css language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StreamActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">NanostreamEventListener</span> </span>{
  <span class="hljs-comment">// implement your class</span>

  <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NotificationRunable</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Runnable</span> </span>{
     <span class="hljs-keyword">private</span> NanostreamEvent m_event;

     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">NotificationRunable</span><span class="hljs-params">(NanostreamEvent event)</span> </span>{
      m_event = event;
     }

     <span class="hljs-meta">@Override</span>
     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span> </span>{
       Toast.makeText(getApplicationContext(), m_event.GetDescription(), Toast.LENGTH_SHORT).show();
     }
   }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onNanostreamEvent</span><span class="hljs-params">(NanostreamEvent event)</span> </span>{
    <span class="hljs-keyword">if</span> (event.GetType() != NanostreamEvent.TYPE_RTMP_QUALITY) {
      <span class="hljs-keyword">this</span>.runOnUiThread(<span class="hljs-keyword">new</span> NotificationRunable(event));
    }
  }
}
</code></pre>
<p>Configure the nanoStreamSettings object for the library:</p>
<pre><code class="hljs css language-java">  <span class="hljs-keyword">private</span> String license = <span class="hljs-string">"--- add your nanoStream license here ---"</span>;
  <span class="hljs-keyword">private</span> String serverUrl = <span class="hljs-string">"rtmp://example.org/live"</span>;
  <span class="hljs-keyword">private</span> String streamName = <span class="hljs-string">"myStream"</span>;
  <span class="hljs-keyword">private</span> nanoStream streamLib = <span class="hljs-keyword">null</span>;

  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">initStreamLib</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> == streamLib) {
      nanoStreamSettings nss = <span class="hljs-keyword">new</span> nanoStreamSettings();
      nss.setLicense(license);
      nss.setLogSettings(logSettings);
      nss.setStreamUrl(serverUrl);
      nss.setStreamName(streamName);
      nss.setEventListener(<span class="hljs-keyword">this</span>);

      <span class="hljs-keyword">try</span> {
        streamLib = <span class="hljs-keyword">new</span> nanoStream(nss);
      } <span class="hljs-keyword">catch</span> (NanostreamException en) {
        Toast.makeText(getApplicationContext(), en.toString(), Toast.LENGTH_LONG).show();
      }

      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> != streamLib) {
        <span class="hljs-keyword">try</span> {
          streamLib.init();
        } <span class="hljs-keyword">catch</span> (NanostreamException e) {
          Toast.makeText(getApplicationContext(), e.toString(), Toast.LENGTH_LONG).show();
        } <span class="hljs-keyword">catch</span> (IllegalArgumentException e) {
          e.printStackTrace();
        }
      }
    }
  }
</code></pre>
<p>Start/Stop the Stream:</p>
<pre><code class="hljs css language-java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">toggleStreaming</span><span class="hljs-params">(View clicked)</span> </span>{
  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">null</span> == streamLib) {
    Toast.makeText(getApplicationContext(), <span class="hljs-string">"nanoStream failed to initialize"</span>, Toast.LENGTH_LONG).show();
    <span class="hljs-keyword">return</span>;
  }

  <span class="hljs-keyword">if</span> (!streamLib.hasState(nanoStream.EncoderState.RUNNING)) {
    Toast.makeText(getApplicationContext(), <span class="hljs-string">"Starting..."</span>, Toast.LENGTH_SHORT).show();

    <span class="hljs-keyword">if</span> (streamLib.hasState(nanoStream.EncoderState.STOPPED) || streamLib.hasState(nanoStream.EncoderState.CREATED)) {
      <span class="hljs-keyword">try</span> {
        Logging.log(Logging.LogLevel.DEBUG, TAG, <span class="hljs-string">"toggleStreaming init nanoStream"</span>);
        streamLib.init();
      } <span class="hljs-keyword">catch</span> (NanostreamException en) {
        Toast.makeText(getApplicationContext(), en.toString(), Toast.LENGTH_LONG).show();
        <span class="hljs-keyword">return</span>;
      }
    }

    <span class="hljs-keyword">try</span> {
      streamLib.start();
    } <span class="hljs-keyword">catch</span> (NanostreamException en) {
      Toast.makeText(getApplicationContext(), en.toString(), Toast.LENGTH_LONG).show();
      <span class="hljs-keyword">return</span>;
    }
  } <span class="hljs-keyword">else</span> {
    Toast.makeText(getApplicationContext(), <span class="hljs-string">"Stopping..."</span>, Toast.LENGTH_SHORT).show();
    streamLib.stop();
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="resolution-aspect-ratio-and-orientation"></a><a href="#resolution-aspect-ratio-and-orientation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolution, Aspect Ratio and Orientation</h2>
<h3><a class="anchor" aria-hidden="true" id="resolution"></a><a href="#resolution" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Resolution</h3>
<p>Resolution means the native resolution of the camera (input). In the most situations this will be the same for the output.
To set the resolution there is a function in the <code>VideoSettings</code> object called <code>setResolution(Resolution res)</code>. If you set a resolution that the
device doesn't support, nanoStream will automatically switch to the nearest resolution available on the device. A list of supported resolutions for the current video source can be obtained from <code>getCapabilities().listAvailableVideoResolutions()</code>
on the <code>nanoStream</code> object.</p>
<h3><a class="anchor" aria-hidden="true" id="aspect-ratio"></a><a href="#aspect-ratio" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Aspect Ratio</h3>
<p>Aspect ratio means the aspect ratio of the outgoing stream. The aspect ratio determines if the input video needs to be cropped.
The aspect ratio can be set through the <code>setAspectRatio(AspectRatio aspectRatio)</code> function on the <code>VideoSettings</code> object.</p>
<h4><a class="anchor" aria-hidden="true" id="supported-aspect-ratios"></a><a href="#supported-aspect-ratios" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supported Aspect Ratios</h4>
<table>
<thead>
<tr><th>Aspect Ratio</th><th>AspectRatio value</th></tr>
</thead>
<tbody>
<tr><td>Keep Input</td><td>AspectRatio.RATIO_KEEP_INPUT</td></tr>
<tr><td>1:1</td><td>AspectRatio.RATIO_1_1</td></tr>
<tr><td>4:3</td><td>AspectRatio.RATIO_4_3</td></tr>
<tr><td>16:9</td><td>AspectRatio.RATIO_16_9</td></tr>
<tr><td>3:4</td><td>AspectRatio.RATIO_3_4</td></tr>
<tr><td>9:16</td><td>AspectRatio.RATIO_9_16</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="orientation"></a><a href="#orientation" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Orientation</h3>
<p>The default stream orientation is landscape. If you switch to portrait the resolution will swap width and height, e.g. from 640x480 to 480x640.
You can set the stream orientation on the <code>nanoStream</code> object with the <code>setStreamRotation</code> function. The stream orientation needs to be set
before starting the stream, it is not possible to switch the orientation during the stream.</p>
<h4><a class="anchor" aria-hidden="true" id="supported-orientations"></a><a href="#supported-orientations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Supported Orientations</h4>
<table>
<thead>
<tr><th>Orientation</th><th>Rotation Value</th></tr>
</thead>
<tbody>
<tr><td>Landscape</td><td>Rotation.ROTATION_0</td></tr>
<tr><td>Portrait</td><td>Rotation.ROTATION_90</td></tr>
<tr><td>Landscape Upside Down</td><td>Rotation.ROTATION_180</td></tr>
<tr><td>Portrait Upside Down</td><td>Rotation.ROTATION_270</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="example-combinations-of-aspect-ratios-and-orientations"></a><a href="#example-combinations-of-aspect-ratios-and-orientations" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example Combinations of Aspect Ratios and Orientations</h3>
<p>The input resolution is set to 640x480 here.
The red rectangle marks up the active area that is included in the output stream.</p>
<table>
<thead>
<tr><th>Orientation</th><th>Aspect Ratio</th><th>Stream Area</th></tr>
</thead>
<tbody>
<tr><td>Portrait<sup><a href="#fnAS1">1</a></sup></td><td>Keep Input</td><td><img src="img/portrait_keep_input.png" alt="Screenshot"></td></tr>
<tr><td>Portrait<sup><a href="#fnAS1">1</a></sup></td><td>4:3</td><td><img src="img/portrait_4_3.png" alt="Screenshot"></td></tr>
<tr><td>Portrait<sup><a href="#fnAS1">1</a></sup></td><td>3:4</td><td><img src="img/portrait_3_4.png" alt="Screenshot"></td></tr>
<tr><td>Portrait<sup><a href="#fnAS1">1</a></sup></td><td>16:9</td><td><img src="img/portrait_16_9.png" alt="Screenshot"></td></tr>
<tr><td>Portrait<sup><a href="#fnAS1">1</a></sup></td><td>9:16</td><td><img src="img/portrait_9_16.png" alt="Screenshot"></td></tr>
<tr><td>Landscape</td><td>Keep Input</td><td><img src="img/landscape_keep_input.png" alt="Screenshot"></td></tr>
<tr><td>Landscape</td><td>4:3</td><td><img src="img/landscape_4_3.png" alt="Screenshot"></td></tr>
<tr><td>Landscape</td><td>3:4</td><td><img src="img/landscape_3_4.png" alt="Screenshot"></td></tr>
<tr><td>Landscape</td><td>16:9</td><td><img src="img/landscape_16_9.png" alt="Screenshot"></td></tr>
<tr><td>Landscape</td><td>9:16</td><td><img src="img/landscape_9_16.png" alt="Screenshot"></td></tr>
</tbody>
</table>
<p><a name="fnAS1">1</a>: In this sample APP we crop the preview so it doesn't look ugly, so the stream is actually larger then the preview.</p>
<h3><a class="anchor" aria-hidden="true" id="example"></a><a href="#example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example</h3>
<p>If you want to stream with a resolution of 640x360 but your device doesn't supports this resolution, you need to crop the resolution from 640x480 (this resolution is supported by the most devices) to 640x360.
This can be done through the aspect ratio, so you need to set the aspect ratio to 16:9 to stream with a resolution of 640x360.</p>
<h3><a class="anchor" aria-hidden="true" id="implementation-example"></a><a href="#implementation-example" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h3>
<pre><code class="hljs css language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> </span>{
    ...
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
      <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
      nanoStreamSettings nss = <span class="hljs-keyword">new</span> nanoStreamSettings();
      VideoSettings vs = <span class="hljs-keyword">new</span> VideoSettings();
      ...
      vs.setResolution(<span class="hljs-keyword">new</span> Resolution(<span class="hljs-number">640</span>, <span class="hljs-number">480</span>)); <span class="hljs-comment">// default value</span>
      vs.setAspectRatio(AspectRatio.RATIO_16_9); <span class="hljs-comment">// default value is AspectRatio.KEEP_INPUT</span>
      ...
      streamLib = <span class="hljs-keyword">new</span> nanoStream(nss);
      streaLib.init();

      streamLib.setStreamRotation(Rotation.ROTATION_0); <span class="hljs-comment">// default value</span>
      ...
    }
    ...
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="stream-type"></a><a href="#stream-type" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Stream Type</h2>
<p>The SDK supports differnet streaming modes:</p>
<ul>
<li>Video and Audio</li>
<li>Video only</li>
<li>Audio only</li>
</ul>
<p>You can en/disable Video/Audio in the <code>nanoStreamSettings</code>.object</p>
<h3><a class="anchor" aria-hidden="true" id="implementation-example-1"></a><a href="#implementation-example-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h3>
<pre><code class="hljs css language-java">nanoStreamSettings nss = <span class="hljs-keyword">new</span> nanoStreamSettings();
nss.setHaveVideo(<span class="hljs-keyword">true</span>); <span class="hljs-comment">// false</span>
nss.setHaveAudio(<span class="hljs-keyword">true</span>); <span class="hljs-comment">// false</span>
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="server-authentication"></a><a href="#server-authentication" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Server Authentication</h2>
<p>In case authentication is required, the credentials can be set on the <code>nanoStreamSettings</code> object.</p>
<h3><a class="anchor" aria-hidden="true" id="implementation-example-2"></a><a href="#implementation-example-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h3>
<pre><code class="hljs css language-java">nanoStreamSettings nss = <span class="hljs-keyword">new</span> nanoStreamSettings();
nss.setAuthUser(<span class="hljs-string">"user"</span>);
nss.setAuthPassword(<span class="hljs-string">"password"</span>);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="local-recording"></a><a href="#local-recording" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Local Recording</h2>
<h3><a class="anchor" aria-hidden="true" id="description"></a><a href="#description" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h3>
<p>The nanoStream Android SDK supports local file recording on the device in MP4 format. This document describes how to enable and configure nanoStream for local recording.</p>
<h3><a class="anchor" aria-hidden="true" id="steps-to-configure-mp4-recording"></a><a href="#steps-to-configure-mp4-recording" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Steps to configure MP4 recording</h3>
<p>MP4 recording can be configured with two function calls on a nanoStreamSettings object.</p>
<ul>
<li>Enabling MP4 recording: setRecordMp4(boolean)</li>
<li>Setting up the file path: setMp4Path(String)</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="setrecordmp4boolean"></a><a href="#setrecordmp4boolean" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>setRecordMp4(boolean)</h3>
<p>The setRecordMp4 function takes a boolean as parameter to enable/disable the recording function.</p>
<h3><a class="anchor" aria-hidden="true" id="setmp4pathstring"></a><a href="#setmp4pathstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>setMp4Path(String)</h3>
<p>The setMp4Path function takes a String as parameter. This string needs to be a valid file path (e.g. /sdcard/test.mp4).
It is recommended to use the getExternalStorageDirectory or getExternalStoragePublicDirectory functions from the
[Android Enviroment][8928e181] API, and add a file name to the returned path. Please find the code snippet below as an example.</p>
<h3><a class="anchor" aria-hidden="true" id="android-permission"></a><a href="#android-permission" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Android Permission</h3>
<p>To be able to write to an external file path your Android app needs the following permissions to be added to the app manifest (AndroidMainfest.xml).</p>
<pre><code class="hljs css language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.WRITE_EXTERNAL_STORAGE"</span> /&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">uses-permission</span> <span class="hljs-attr">android:name</span>=<span class="hljs-string">"android.permission.STORAGE"</span> /&gt;</span>
</code></pre>
<h4><a class="anchor" aria-hidden="true" id="android-60"></a><a href="#android-60" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Android 6.0</h4>
<p>Due to the new permission handling in Android 6 (M) writing to external directories (DCIM) requires a permission by user. Writing to the applications own data directory (/Android/data/com.companyname.appname/) is not restricted.</p>
<h3><a class="anchor" aria-hidden="true" id="implementation-example-3"></a><a href="#implementation-example-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h3>
<pre><code class="hljs css language-java">File externalFilePath = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
File filePath = <span class="hljs-keyword">new</span> File(externalFilePath, <span class="hljs-string">"myMp4File.mp4"</span>);
String mp4FilePath = filePath.getAbsolutePath();

nanoStreamSettings nss = <span class="hljs-keyword">new</span> nanoStreamSettings();
nss.setRecordMp4(<span class="hljs-keyword">true</span>);
nss.setMp4Path(mp4FilePath);
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="adaptive-bitrate-streaming"></a><a href="#adaptive-bitrate-streaming" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Adaptive Bitrate Streaming</h2>
<p>By using the Adaptive Bitrate Control (ABC) the stream will automatically adjust to changes of the bandwidth. There are four modes available:</p>
<ul>
<li>DISABLED: The Adaptive Bitrate Control is disabled.</li>
<li>QUALITY_DEGRADE: The video quality will be changed if the bandwidth changes. For instance, if not enough bandwidth is available, the video bitrate will be decreased, which in turn degrades the video quality.</li>
<li>FRAME_DROP: Low bandwidth is compensated by decreasing the framerate (FPS), but maintaining the video qualtiy.</li>
<li>QUALITY_DEGRADE_AND_FRAME_DROP: The video quality and the framerate (FPS) decreased if the not enough bandwidth is available.</li>
</ul>
<p>Make sure to set the ABC settings before a stream is started.</p>
<h3><a class="anchor" aria-hidden="true" id="implementation-example-4"></a><a href="#implementation-example-4" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h3>
<pre><code class="hljs css language-java"><span class="hljs-keyword">private</span> AdaptiveBitrateControlSettings.AdaptiveBitrateControlMode abcMode = AdaptiveBitrateControlSettings.AdaptiveBitrateControlMode.QUALITY_DEGRADE_AND_FRAME_DROP;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> videoBitrate = <span class="hljs-number">500000</span>;

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initStreamLib</span><span class="hljs-params">()</span> </span>{
  AdaptiveBitrateControlSettings abcSettings = <span class="hljs-keyword">new</span> AdaptiveBitrateControlSettings(abcMode);
  abcSettings.SetMaximumBitrate((<span class="hljs-keyword">int</span>)(videoBitrate * <span class="hljs-number">1.5</span>));

  nanoStreamSettings nss = <span class="hljs-keyword">new</span> nanoStreamSettings();
  nss.setAbcSettings(abcSettings);
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="measuring-the-available-bandwidth"></a><a href="#measuring-the-available-bandwidth" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Measuring the available bandwidth</h3>
<p>For measuring the available bandwidth you can use the method <code>runBandwidthCheck</code>. After the check finished, the result can be used to set the bitrate for the nanoStream object.
The check measures the bandwidth by running a test stream to the server.
The BandwidthCheck Class has three public functions:</p>
<ul>
<li>runBandwidthCheck(BandwidthCheckSettings settings, BandwidthCheckResultCallback callback()</li>
<li>forceStop()</li>
<li>abort()</li>
</ul>
<p>There is a BandwidthCheckSettings Class, the constructor creates a standard object of BandwidthCheckSettings, with the following settings:</p>
<table>
<thead>
<tr><th style="text-align:left">property</th><th style="text-align:left">default values</th><th style="text-align:left">meaning</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">prerollSeconds</td><td style="text-align:left">1 (in sec.)</td><td style="text-align:left">this is the pre roll time to connect to the server</td></tr>
<tr><td style="text-align:left">runTime</td><td style="text-align:left">5 (in sec.)</td><td style="text-align:left">the run time of the bandwidth check</td></tr>
<tr><td style="text-align:left">maxBitrate</td><td style="text-align:left">3000000 (bit/s = 3 MBit/s)</td><td style="text-align:left">the maximum bit rate for the bandwidth check</td></tr>
<tr><td style="text-align:left">rtmpUrl</td><td style="text-align:left">empty</td><td style="text-align:left">the rtmp url for the bandwidth check</td></tr>
<tr><td style="text-align:left">streamId</td><td style="text-align:left">empty</td><td style="text-align:left">the stream id for the bandwidth check</td></tr>
</tbody>
</table>
<p>With this settings you can call the runBandwidthCheck methode, the second parameter is the callback for the results. This callback class has a finished method that will be called after bandwidth check is done.
The finished method has one parameter from type BandwidthCheckResult, this object has 6 getter methods:</p>
<ul>
<li>getAverageBitrate() // the average measured bandwidth</li>
<li>getMedianBitrate() // the median measured bandwidth</li>
<li>getMaxBitrate() // the maximum measured bandwidth</li>
<li>getMinBitrate() // the minimum measured bandwidth</li>
<li>getRunTimeMS() // the run time in ms</li>
<li>getErrorCode() // the error code if all is ok this is nanoResults.N_OK (all error codes can be found in the nanoStream API Reference documentation for nanoResults)</li>
</ul>
<p>The forceStop call stops the bandwidth check and will return the results that where measured until then. The abort call stops the bandwidth check but don't return any results.</p>
<p>The bandwidth check, sends a special type of metadata that will not be recorded on the Streaming Server.</p>
<h4><a class="anchor" aria-hidden="true" id="implementation-example-5"></a><a href="#implementation-example-5" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h4>
<pre><code class="hljs css language-java"><span class="hljs-keyword">private</span> BandwidthCheck bwCheck = <span class="hljs-keyword">null</span>;

<span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomBandwidthCheckResultCallback</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">BandwidthCheckResultCallback</span> </span>{
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">finished</span><span class="hljs-params">(<span class="hljs-keyword">final</span> BandwidthCheckResult bandwidthCheckResult)</span> </span>{
    Log.d(TAG, <span class="hljs-string">"BandwidthCheck results: "</span> +
      <span class="hljs-string">"\n\tAverage Bitrate (kBit/s): "</span> + bandwidthCheckResult.getAverageBitrate() / <span class="hljs-number">1000</span> +
      <span class="hljs-string">"\n\tMedian Bitrate  (kBit/s): "</span> + bandwidthCheckResult.getMedianBitrate() / <span class="hljs-number">1000</span> +
      <span class="hljs-string">"\n\tMax Bitrate     (kBit/s): "</span> + bandwidthCheckResult.getMaxBitrate() / <span class="hljs-number">1000</span> +
      <span class="hljs-string">"\n\tMin Bitrate     (kBit/s): "</span> + bandwidthCheckResult.getMinBitrate() / <span class="hljs-number">1000</span> +
      <span class="hljs-string">"\n\tRun Time        (ms)    : "</span> + bandwidthCheckResult.getRunTimeMS());
  }
}

<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initBandwidthCheck</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> == bwCheck) {
    BandwidthCheckSettings settings = <span class="hljs-keyword">new</span> BandwidthCheckSettings();
    settings.setRtmpUrl(serverUrl);
    settings.setStreamId(streamName);
    bwCheck = <span class="hljs-keyword">new</span> BandwidthCheck();
    bwCheck.runBandwidthCheck(settings, <span class="hljs-keyword">new</span> CustomBandwidthCheckResultCallback());
  }
}
</code></pre>
<p>##Snapshot</p>
<p>To get a snapshot (image) of the current preview/stream, the method <code>takeSnapshot</code> can be used. This is a non blocking function, for the result you need to implement the SnapshotCallback interface. The snapshot returns as a base64 encoded JPEG</p>
<h3><a class="anchor" aria-hidden="true" id="implementation-example-6"></a><a href="#implementation-example-6" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h3>
<pre><code class="hljs css language-java"><span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CustomSnapshotCallback</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">SnapshotCallback</span> </span>{
  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onSuccess</span><span class="hljs-params">(String arg0)</span></span>{
    <span class="hljs-comment">// do something with the base64 encoded JPEG.</span>
  }

  <span class="hljs-meta">@Override</span>
 <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">onFailure</span><span class="hljs-params">()</span></span>{
   Log.d(TAG, <span class="hljs-string">"takeSnapshot() failed!"</span>)
 }
}
<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">shapshot</span><span class="hljs-params">()</span> </span>{
  streamLib.takeSnapshot(<span class="hljs-keyword">new</span> CustomSnapshotCallback());
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="camera-zoom"></a><a href="#camera-zoom" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Camera Zoom</h2>
<h3><a class="anchor" aria-hidden="true" id="description-1"></a><a href="#description-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h3>
<p>The nanoStream Android SDK supports camera zoom, if the internal camera supports it. Therefor there are a few functions, the most important are:</p>
<table>
<thead>
<tr><th style="text-align:left">Function</th><th style="text-align:left">Return Type</th><th style="text-align:left">returns</th></tr>
</thead>
<tbody>
<tr><td style="text-align:left">hasZoom()</td><td style="text-align:left">boolean</td><td style="text-align:left">true if zoom is supported by the video source/ device</td></tr>
<tr><td style="text-align:left">getZoomRatios()</td><td style="text-align:left">List<Integer></td><td style="text-align:left">list with of ale zoom ratios</td></tr>
<tr><td style="text-align:left">getZoom()</td><td style="text-align:left">int</td><td style="text-align:left">the index of the List<Integer> that returned from getZoomRatios()</td></tr>
<tr><td style="text-align:left">setZoom(int)</td><td style="text-align:left">int</td><td style="text-align:left">the new index of the List<Integer> that returned from getZoomRatios()</td></tr>
</tbody>
</table>
<p>It is recommended to use pinch to zoom, therefor you need to implement a ScaleGestureDetector.SimpleOnScaleGestureListener, and a pinch2zoom function, that takes the scalefactor from the SimpleOnScaleGestureListener as a int parameter, take a loaok at the <a href="#nanostream_android_camera_zoom_impl_example" title="Implementation Example">Implementation Example</a>.</p>
<h4><a class="anchor" aria-hidden="true" id="getzoomratios"></a><a href="#getzoomratios" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>getZoomRatios()</h4>
<p>getZoomRatios() returns a List of Integer values, this values are the zoom ratios in 1/100 increments (e.g. a zoom of 3.2x is returned as 320).</p>
<h4><a class="anchor" aria-hidden="true" id="setzoomint"></a><a href="#setzoomint" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>setZoom(int)</h4>
<p>The int parameter from setZoom(int zoom) is the index of zoom ratios that returns getZoomRatios().</p>
<h4><a class="anchor" aria-hidden="true" id="zoom-behavior-on-camera-switch"></a><a href="#zoom-behavior-on-camera-switch" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Zoom Behavior on Camera Switch</h4>
<p>During a camera switch (e.g. from back to front) the zoom remains unaffected.</p>
<h4><a class="anchor" aria-hidden="true" id="implementation-example-7"></a><a href="#implementation-example-7" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h4>
<pre><code class="hljs css language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> </span>{
  <span class="hljs-keyword">private</span> ScaleGestureDetector scaleGestureDetector;
  <span class="hljs-keyword">private</span> List&lt;Integer&gt; mZoomRatios = <span class="hljs-keyword">null</span>;

  <span class="hljs-keyword">private</span> nanoStream streamLib = <span class="hljs-keyword">null</span>;

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);

    nanoStreamSettings nss = <span class="hljs-keyword">new</span> nanoStreamSettings();
    <span class="hljs-comment">// configure nanoStreamSettings</span>

    streamLib = <span class="hljs-keyword">new</span> nanoStream(nss);

    <span class="hljs-keyword">if</span>(streamLib.hasZoom()) {
      mZoomRatios = streamLib.getZoomRatio();
    }

    <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> == scaleGestureDetector) {
      scaleGestureDetector = <span class="hljs-keyword">new</span> ScaleGestureDetector(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">new</span> ScaleGestureListener());
    }
  }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onTouchEvent</span><span class="hljs-params">(MotionEvent event)</span>
  </span>{
    <span class="hljs-keyword">if</span> (scaleGestureDetector != <span class="hljs-keyword">null</span>)
    {
      scaleGestureDetector.onTouchEvent(event);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
  }

  <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ScaleGestureListener</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">ScaleGestureDetector</span>.<span class="hljs-title">SimpleOnScaleGestureListener</span> </span>{
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onScale</span><span class="hljs-params">(ScaleGestureDetector detector)</span> </span>{
      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> != streamLib) {
        <span class="hljs-keyword">if</span> (streamLib.hasZoom()) {
          pinch2Zoom(detector.getScaleFactor());
        }
      }
      <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
  }

  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">pinch2Zoom</span><span class="hljs-params">(<span class="hljs-keyword">float</span> scaleFactor)</span> </span>{
    <span class="hljs-keyword">if</span> (streamLib.hasZoom() &amp;&amp; <span class="hljs-keyword">null</span> != mZoomRatios) {
      <span class="hljs-keyword">int</span> zoomFactor = streamLib.getZoom();
      <span class="hljs-keyword">float</span> zoomRatio = mZoomRatios.get(zoomFactor) / <span class="hljs-number">100f</span>;
      zoomRatio *= scaleFactor;
      <span class="hljs-keyword">if</span> (zoomRatio &gt; <span class="hljs-number">1.0f</span>) {
        <span class="hljs-keyword">if</span> (scaleFactor &gt; <span class="hljs-number">1.0f</span>) {
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = zoomFactor; i &lt; mZoomRatios.size(); i++) {
            Double zoom = mZoomRatios.get(i) / <span class="hljs-number">100.0</span>;
            <span class="hljs-keyword">if</span> (zoom &gt;= zoomRatio) {
              streamLib.setZoom(i);
              <span class="hljs-keyword">break</span>;
            }
          }
        } <span class="hljs-keyword">else</span> {
          <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = zoomFactor; i &gt; <span class="hljs-number">0</span>; i--) {
            Double zoom = mZoomRatios.get(i) / <span class="hljs-number">100.0</span>;
            <span class="hljs-keyword">if</span> (zoom &lt;= zoomRatio) {
              streamLib.setZoom(i);
              <span class="hljs-keyword">break</span>;
            }
          }
        }
      }
    }
  }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="camera-focus"></a><a href="#camera-focus" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Camera Focus</h2>
<h3><a class="anchor" aria-hidden="true" id="description-2"></a><a href="#description-2" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h3>
<p>The nanoStream Android SDK supports camera focus and focus lock, if the internal cameras supports them.
There are two non-blocking functions</p>
<pre><code class="hljs css language-java">setFocusArea(<span class="hljs-keyword">int</span> focusWidth, <span class="hljs-keyword">int</span> focusHeight, <span class="hljs-keyword">float</span> areaMultiple, <span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y, <span class="hljs-keyword">int</span> previewWidth, <span class="hljs-keyword">int</span> previewHeight, <span class="hljs-keyword">int</span> weigh)
setFocusLockArea(<span class="hljs-keyword">int</span> focusWidth, <span class="hljs-keyword">int</span> focusHeight, <span class="hljs-keyword">float</span> areaMultiple, <span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y, <span class="hljs-keyword">int</span> previewWidth, <span class="hljs-keyword">int</span> previewHeight, <span class="hljs-keyword">int</span> weigh)
</code></pre>
<p>through the</p>
<pre><code class="hljs css language-java">addFocusCalback(FocusCallback callback)
removeFocusCalback(FocusCallback callback)
</code></pre>
<p>you can attach or remove a FocusCallback listener.
To check if your device supports focus call the function</p>
<pre><code class="hljs css language-java">isFocusSupported()
</code></pre>
<p>which will return true or false.</p>
<h3><a class="anchor" aria-hidden="true" id="parameter-list"></a><a href="#parameter-list" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Parameter List</h3>
<table>
<thead>
<tr><th><strong>Parameter name</strong></th><th><strong>meaning</strong></th></tr>
</thead>
<tbody>
<tr><td>focusWidth</td><td>the focus Area width</td></tr>
<tr><td>focusHeight</td><td>the focus Area height</td></tr>
<tr><td>areaMultiple</td><td>a Multiple for the focus area (default: 1f)</td></tr>
<tr><td>x</td><td>the x position on the Screen</td></tr>
<tr><td>y</td><td>the y position on the Screen</td></tr>
<tr><td>previewWidth</td><td>the width of the preview</td></tr>
<tr><td>previewHeight</td><td>the height of the preview</td></tr>
<tr><td>weight</td><td>the weight of the area must be range from 1 to 1000</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="focuscallback-interface"></a><a href="#focuscallback-interface" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>FocusCallback interface</h3>
<p>The FocusCallback interface has three abstract functions</p>
<pre><code class="hljs css language-java">onSuccess()
onSuccess(Rect rect, Boolean focusLock)
onFailure()
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="implementation-example-8"></a><a href="#implementation-example-8" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h3>
<pre><code class="hljs css language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActifity</span> <span class="hljs-title">extens</span> <span class="hljs-title">Actifity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">FocusCallback</span> </span>{
  <span class="hljs-keyword">private</span> GestureDetector gestureDetector;
  <span class="hljs-keyword">private</span> nanoStream streamLib = <span class="hljs-keyword">null</span>;

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
    <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
    streamLib = <span class="hljs-keyword">new</span> nanoStream(<span class="hljs-keyword">new</span> nanoStreamSettings());
    <span class="hljs-keyword">if</span>(streamLib.isFocusSupported()) {
      gestureDetector = <span class="hljs-keyword">new</span> GestureDetector(<span class="hljs-keyword">this</span>, <span class="hljs-keyword">new</span> GestureListener());
    }
    ...
  }

  <span class="hljs-meta">@Override</span>
  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onTouchEvent</span><span class="hljs-params">(MotionEvent event)</span>
  </span>{
    <span class="hljs-keyword">if</span> (gestureDetector != <span class="hljs-keyword">null</span>)
    {
        gestureDetector.onTouchEvent(event);
    }
    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
  }
  ....
  <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">GestureListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">OnGestureListener</span> </span>{

     <span class="hljs-meta">@Override</span>
     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">onSingleTapUp</span><span class="hljs-params">(MotionEvent e)</span>
     </span>{
         <span class="hljs-keyword">if</span> (streamLib != <span class="hljs-keyword">null</span>)
         {
             streamLib.setFocusArea(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">1f</span>, (<span class="hljs-keyword">int</span>) e.getX(), (<span class="hljs-keyword">int</span>) e.getY(), surface.getWidth(), surface.getHeight(), <span class="hljs-number">1000</span>);
         }
         <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
     }

    <span class="hljs-meta">@Override</span>
     <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onLongPress</span><span class="hljs-params">(MotionEvent e)</span>
     </span>{
         <span class="hljs-keyword">if</span> (streamLib != <span class="hljs-keyword">null</span>)
         {
             streamLib.setFocusLockArea(<span class="hljs-number">300</span>, <span class="hljs-number">300</span>, <span class="hljs-number">1f</span>, (<span class="hljs-keyword">int</span>) e.getX(), (<span class="hljs-keyword">int</span>) e.getY(), surface.getWidth(), surface.getHeight(), <span class="hljs-number">1000</span>);
         }
     }
   }

   <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onSuccess</span><span class="hljs-params">(Rect rect, Boolean aBoolean)</span> </span>{
      Log.i(TAG, <span class="hljs-string">"focus success"</span>);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onFailure</span><span class="hljs-params">()</span> </span>{
      Log.i(TAG, <span class="hljs-string">"focus failed"</span>);
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="deviceproperties"></a><a href="#deviceproperties" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>DeviceProperties</h2>
<p>Before Android 4.3 there was no obligation for Android hardware manufacturers to pass the video related parts of the CTS (Compatibility Test Suite).
Therefore some Android 4.1 and 4.2 Devices show non standard behaviour in regard to color format definitions and representation of video frames in memory. This could lead to issues in the video stream like switched red and blue colors, dislocated color components or a green bar at the bottom of the video frame. nanoStream Android now provides the functionality to detect and compensate common issues related to this.</p>
<h3><a class="anchor" aria-hidden="true" id="description-3"></a><a href="#description-3" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description</h3>
<p><code>nanoStream.getDeviceProperties()</code> is a static function that is running a test on the device hardware to detect non standard behaviour and returning a DeviceProperties object containing the result.
<code>DeviceProperties.getFlags()</code> returns the test result as an integer value that can be stored in the application preferences, to avoid running the device test on every app start.
DeviceProperties can be applied to a new nanoStream instance by calling <code>nanoStream.setDeviceProperties(DeviceProperties)</code>.
We recommend to call <code>getDeviceProperties()</code> in a background thread during the first app start on a pre 4.3 device, because the call is blocking and might last up to 5 seconds on older/weaker devices.
We also recommend to store the OS version in the preferences, to be able to detect OS updates and to eventually rerun the device test or stop setting the DeviceProperties if the new OS is 4.3 or higher.</p>
<h3><a class="anchor" aria-hidden="true" id="implementation-example-9"></a><a href="#implementation-example-9" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h3>
<pre><code class="hljs css language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">App</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Application</span>
</span>{
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> DeviceProperties deviceProp = <span class="hljs-keyword">null</span>;

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">super</span>.onCreate();

        Thread chkThread = <span class="hljs-keyword">new</span> Thread(<span class="hljs-keyword">new</span> Runnable()
        {
            <span class="hljs-meta">@Override</span>
            <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span>
            </span>{
                <span class="hljs-keyword">try</span>
                {
                    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(getApplicationContext());
                    <span class="hljs-keyword">int</span> curApiVer = android.os.Build.VERSION.SDK_INT;
                    <span class="hljs-keyword">int</span> curAppVer = getPackageManager().getPackageInfo(getPackageName(), <span class="hljs-number">0</span>).versionCode;
                    <span class="hljs-keyword">int</span> curEncVer = DeviceProperties.VERSION;

                    <span class="hljs-keyword">int</span> oldApiVer = prefs.getInt(<span class="hljs-string">"Pref_Android_API"</span>, <span class="hljs-number">0</span>);
                    <span class="hljs-keyword">int</span> oldAppVer = prefs.getInt(<span class="hljs-string">"Pref_App_Version"</span>, <span class="hljs-number">0</span>);
                    <span class="hljs-keyword">int</span> oldChkVer = prefs.getInt(<span class="hljs-string">"Pref_Check_Version"</span>, <span class="hljs-number">0</span>);
                    <span class="hljs-keyword">int</span> oldChkResult = prefs.getInt(<span class="hljs-string">"Pref_Check_Result"</span>, -<span class="hljs-number">1</span>);

                    <span class="hljs-keyword">if</span> (((oldApiVer * oldAppVer * oldApiVer) == <span class="hljs-number">0</span>)
                    || (oldApiVer &lt; curApiVer)
                    || (oldAppVer &lt; curAppVer)
                    || (oldChkVer &lt; curEncVer)
                    || oldChkResult &lt; <span class="hljs-number">0</span>)
                    {

                        Editor edit = prefs.edit();
                        edit.putInt(<span class="hljs-string">"Pref_Android_API"</span>, curApiVer);
                        edit.putInt(<span class="hljs-string">"Pref_App_Version"</span>, curAppVer);

                        <span class="hljs-comment">/* Run  device check */</span>
                        <span class="hljs-keyword">try</span>
                        {
                            deviceProp = nanoStream.getDeviceProperties();

                            edit.putInt(<span class="hljs-string">"Pref_Check_Result"</span>, deviceProp.getFlags());
                            edit.putInt(<span class="hljs-string">"Pref_Check_Version"</span>, deviceProp.getVersion());
                            edit.commit();
                        }
                        <span class="hljs-keyword">catch</span> (RuntimeException e)
                        {
                            Log.d(<span class="hljs-string">"Device Check failed"</span>, e.toString());
                            edit.putInt(<span class="hljs-string">"Pref_Check_Result"</span>, -<span class="hljs-number">1</span>);
                            edit.putInt(<span class="hljs-string">"Pref_Check_Version"</span>, <span class="hljs-number">0</span>);
                            edit.commit();
                        }

                    }
                    <span class="hljs-keyword">else</span>
                    {
                        deviceProp = <span class="hljs-keyword">new</span> DeviceProperties(oldChkResult);
                    }

                    Log.d(<span class="hljs-string">"Device Properties: "</span>, deviceProp.toString());
                }
                <span class="hljs-keyword">catch</span> (Exception e)
                {
                    Log.d(<span class="hljs-keyword">this</span>.getClass().getName(), <span class="hljs-string">"Device Check Runnable"</span>);
                    e.printStackTrace();
                }
            }
        });

        <span class="hljs-keyword">if</span> (android.os.Build.VERSION.SDK_INT &lt; <span class="hljs-number">18</span>)
        {
            chkThread.start();
        }

        ...
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> DeviceProperties <span class="hljs-title">getDeviceProperties</span><span class="hljs-params">()</span>
    </span>{
        <span class="hljs-keyword">return</span> deviceProp;
    }
}
</code></pre>
<pre><code class="hljs css language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MainActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">NanostreamEventListener</span>
</span>{
    ...
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span>
    </span>{
        <span class="hljs-keyword">try</span>
        {
            nanoStreamSettings nss = <span class="hljs-keyword">new</span> nanoStreamSettings();

            streamLib = <span class="hljs-keyword">new</span> nanoStream(nss);

            DeviceProperties deviceProperties = App.getDeviceProperties();

            <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> != streamLib &amp;&amp; <span class="hljs-keyword">null</span> != deviceProperties)
            {
                streamLib.setDeviceProperties(deviceProperties);
            }
        }
        <span class="hljs-keyword">catch</span>(NanostreamException en)
        {
            Toast.makeText(getApplicationContext(), en.toString(), Toast.LENGTH_LONG).show();
        }
    }
    ...
}
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="rtmp-playback"></a><a href="#rtmp-playback" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>RTMP Playback</h2>
<h3><a class="anchor" aria-hidden="true" id="description-and-features"></a><a href="#description-and-features" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Description and Features</h3>
<p>RTMP Playback Component enables application developers to add playback of RTMP live and on demand streams to their apps.</p>
<p>Supported codecs are H.264 Video, AAC and MP3 Audio.</p>
<p>Video streams are decoded and rendered on a Surface that is hold by the application, usually connected to a <code>SurfaceView</code>.</p>
<p>Audio streams are decoded and rendered to system audio using the Android AudioSession/AudioTrack API.</p>
<p>The interface and usage are similar to the Android MediaPlayer. The Android MediaPlayerControl interface is implemented to enable control through an <code>android.widget.MediaController</code> instance.</p>
<h3><a class="anchor" aria-hidden="true" id="license"></a><a href="#license" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>License</h3>
<p>The playback component requires a special feature flag to be enabled in your nanoStream license key. It not necessarily included in nanoStream Android SDK licenses.</p>
<h3><a class="anchor" aria-hidden="true" id="interface"></a><a href="#interface" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interface</h3>
<h4><a class="anchor" aria-hidden="true" id="package-name"></a><a href="#package-name" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Package name</h4>
<p><code>net.nanocosmos.nanoStream.streamer</code></p>
<h4><a class="anchor" aria-hidden="true" id="declaration"></a><a href="#declaration" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Declaration</h4>
<p><code>public abstract class NanostreamPlayer implements MediaPlayercontrol, Surfaceholder.Callback</code></p>
<h4><a class="anchor" aria-hidden="true" id="function-life-cycle"></a><a href="#function-life-cycle" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Function Life Cycle</h4>
<table>
<thead>
<tr><th>Instance Handling</th><th>Initialization</th><th>Capabilities</th><th>Queries</th><th>Playback Control</th><th>Supported by RTMP Player</th></tr>
</thead>
<tbody>
<tr><td>createNanostreamPlayer</td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td>setSettings</td><td></td><td></td><td></td><td>yes</td></tr>
<tr><td></td><td>setPlayerEventListener</td><td></td><td></td><td></td><td>yes</td></tr>
<tr><td></td><td></td><td>canPrepare</td><td></td><td></td><td>yes</td></tr>
<tr><td></td><td></td><td>canPrepareAsync</td><td></td><td></td><td>yes</td></tr>
<tr><td></td><td></td><td>canPause</td><td></td><td></td><td>yes</td></tr>
<tr><td></td><td></td><td>canSeekBackward</td><td></td><td></td><td>yes</td></tr>
<tr><td></td><td></td><td>canSeekForward</td><td></td><td></td><td>yes</td></tr>
<tr><td></td><td></td><td></td><td>getState</td><td></td><td>yes</td></tr>
<tr><td></td><td></td><td></td><td>isPlaying</td><td></td><td>yes</td></tr>
<tr><td></td><td></td><td></td><td>getCurrentPosition</td><td></td><td>no</td></tr>
<tr><td></td><td></td><td></td><td>getDuration</td><td></td><td>no</td></tr>
<tr><td></td><td></td><td></td><td></td><td>prepare</td><td>no</td></tr>
<tr><td></td><td></td><td></td><td></td><td>prepareAsync</td><td>no</td></tr>
<tr><td></td><td></td><td></td><td></td><td>start</td><td>yes</td></tr>
<tr><td></td><td></td><td></td><td></td><td>pause</td><td>yes</td></tr>
<tr><td></td><td></td><td></td><td></td><td>seekTo</td><td>yes</td></tr>
<tr><td></td><td></td><td></td><td></td><td>stop</td><td>yes</td></tr>
<tr><td></td><td></td><td></td><td></td><td>start</td><td>yes</td></tr>
<tr><td></td><td></td><td></td><td></td><td>stop</td><td>yes</td></tr>
<tr><td></td><td>close</td><td></td><td></td><td></td><td>no</td></tr>
<tr><td></td><td>release</td><td></td><td></td><td></td><td>yes</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="creating-an-instance"></a><a href="#creating-an-instance" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Creating an Instance</h3>
<p><code>NanostreamPlayer</code> instances can be created through the static factory function <code>createNanostreamPlayer</code> at the top level <code>nanoStream class</code>. NanostreamPlayer is designed to support multiple player instances. The number of parallel instances can be limited by system resources such as codec,surfaces,memory, network connections and bandwidth.</p>
<h3><a class="anchor" aria-hidden="true" id="configuration-and-settings"></a><a href="#configuration-and-settings" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Configuration and Settings</h3>
<p>Initial player settings are wrapped by the <code>NanostreamPlayer.PlayerSettings</code> class. The settings can be applied by calling <code>NanostreamPlayer.setSettings</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="playersettings"></a><a href="#playersettings" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>PlayerSettings:</h3>
<table>
<thead>
<tr><th>Setting</th><th>Functions</th><th>Description</th><th>Type</th><th>Default Values</th></tr>
</thead>
<tbody>
<tr><td>License</td><td>getLicense/setLicense</td><td>nanoStream license key</td><td>String</td><td>empty</td></tr>
<tr><td>Url</td><td>getUrl/setUrl</td><td>RTMP url</td><td>String</td><td>empty</td></tr>
<tr><td>Stream Name</td><td>getStreamname/setStreamname</td><td>RTMP stream name</td><td>String</td><td>empty</td></tr>
<tr><td>User Name</td><td>getUsername/setUsername</td><td>User name if RTMP authentication is required</td><td>String</td><td>empty</td></tr>
<tr><td>Password</td><td>getPassword/setPassword Password if RTMP authentication is required</td><td>String</td><td>empty</td><td></td></tr>
<tr><td>Buffer Time</td><td>getBufferTimeMs/setBufferTimeMs</td><td>Length of the stream buffer in milliseconds</td><td>Integer</td><td>2000ms/2s</td></tr>
<tr><td>Frame Dropping Mode</td><td>getFrameDroppingMode/setFrameDroppingMode</td><td>Configuration of the dropping mode regarding different droppable frame types</td><td>FrameDroppingMode</td><td>DROP_NO_FRAMES</td></tr>
<tr><td>Stream Playback</td><td>getVideoPlayback/getAudioPlayback/setStreamPlayback</td><td>Enable stream types to be decoded and played</td><td>boolean</td><td>video:true, audio:true</td></tr>
<tr><td>TrackTimout</td><td>getTrackTimeout/setTrackTimeout</td><td>Timeout to waiting for Track info</td><td>long</td><td>10000</td></tr>
<tr><td>EndlessMode</td><td>getEndlessMode/setEndlessMode</td><td>Reopen the stream until stop call</td><td>boolean</td><td>false</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="player-state"></a><a href="#player-state" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Player State</h3>
<p>The player stat can be queried through the <code>getState()</code> function</p>
<pre><code class="hljs css language-java"><span class="hljs-comment">/**
*
* The different states of the player instance.
*
*/</span>
<span class="hljs-keyword">public</span> <span class="hljs-keyword">enum</span> PlayerState
{
    IDLE, INITIALIZED, PREPARED, STARTED, PAUSED, SEEKING, BUFFERING, RECONNECTING, PLAYBACKCOMPLETED, STOPPING, STOPPED;
}
</code></pre>
<table>
<thead>
<tr><th>State</th><th>Description</th><th>Supported by RTMP Player</th></tr>
</thead>
<tbody>
<tr><td>PlayerState.IDLE</td><td>Initial state. Player has not yet been initialized or has been closed.</td><td>yes</td></tr>
<tr><td>PlayerState.INITIALIZED</td><td>Player has been initialized with license and settings.</td><td>yes</td></tr>
<tr><td>PlayerState.PREPARED</td><td>Player has been prepared and is ready to start.</td><td>no</td></tr>
<tr><td>PlayerState.STARTED</td><td>Playback has been started.</td><td>yes</td></tr>
<tr><td>PlayerState.PAUSED</td><td>Playback has been paused.</td><td>yes</td></tr>
<tr><td>PlayerState.SEEKING</td><td>Player is Seeking</td><td>yes</td></tr>
<tr><td>PlayerState.BUFFERING</td><td>Player is buffering stream data.</td><td>yes</td></tr>
<tr><td>PlayerState.RECONNECTING</td><td>Player is performing a reconnect</td><td>no</td></tr>
<tr><td>PlayerState.PLAYBACKCOMPLETED</td><td>Playback has ended due to end of stream.</td><td>yes</td></tr>
<tr><td>PlayerState.STOPPING</td><td>Player is stopping</td><td>yes</td></tr>
<tr><td>PlayerState.STOPPED</td><td>Player is stopped</td><td>yes</td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="event-notification"></a><a href="#event-notification" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Event Notification</h3>
<p>Event notifications can be received through the <code>NanostreamPlayer.PlayerEventListener</code> interface. Derive your listener from this interface and add it to the player by calling <code>setPlayerEventListener()</code>.</p>
<h3><a class="anchor" aria-hidden="true" id="status-events"></a><a href="#status-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Status Events</h3>
<p>Event Type : <code>TYPE_RTMP_STATUS</code></p>
<table>
<thead>
<tr><th>Event Code</th><th>Description</th><th>Corresponding State</th></tr>
</thead>
<tbody>
<tr><td>NanostreamEvent.CODE_STREAM_STARTED</td><td>Playback has been started.</td><td>PlayerState.STARTED</td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_STOPPING</td><td>Playback will stop.</td><td>PlayerState.STOPPING</td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_STOPPED</td><td>Playback has been stopped.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_ERROR_CONNECT</td><td>The connect to the stream url failed.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_BUFFERING</td><td>Player is buffering stream data</td><td>PlayerState.BUFFERING</td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_PLAYBACKCOMPLETED</td><td>Playback has ended due to end of stream.</td><td>PlayerState.PLAYBACKCOMPLETED</td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_NOT_FOUND</td><td>The specified stream could not be found.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_SEEKING</td><td>The Stream is seeking.</td><td>PlayerState.SEEKING</td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_PAUSED</td><td>The Stream is paused</td><td>PlayerState.PAUSED</td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_VIDEO_FORMAT_AVAILABLE</td><td>The Stream has a MediaFormat for the Video Track</td><td></td></tr>
<tr><td>NanostreamEvent.CODE_STREAM_AUDIO_FORMAT_AVAILABLE</td><td>The Stream has a MediaFormat for the Audio Track</td><td></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="results-and-error-events"></a><a href="#results-and-error-events" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Results and Error Events</h3>
<p>Event Type : <code>TYPENANORESULTS</code> Event Codes : Values of type nanoResults</p>
<table>
<thead>
<tr><th>Event Code</th><th>Description</th><th>Corresponding State</th></tr>
</thead>
<tbody>
<tr><td>nanoResults.N_NOT_INITIALIZED</td><td>The RTMP library has not been initialized properly.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_ALLOCATEDATA_FAILED_RTMP_SRC</td><td>Memory allocation failed.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_LICENSE_INVALID</td><td>License check failed - License invalid.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_LICENSE_INVALID_RTMP_SRC</td><td>License check failed - RTMP playback is not included.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_LICENSE_EXPIRED</td><td>License check failed - The license period has ended.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_TCP_CONNECT_FAILED</td><td>TCP connect failed.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_RTMP_HANDSHAKE_FAILED</td><td>RTMP handshake failed.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_RTMP_CONNECT_FAILED</td><td>RTMP connect failed.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_RTMP_AUTH_FAILED</td><td>RTMP authentication is required and failed.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_RTMP_APP_INVALID</td><td>The application part of the url is invalid and has been rejected.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_RTMP_STATUS_PLAY_STREAM_NOT_FOUND</td><td>The stream name could not be found.</td><td>PlayerState.STOPPED</td></tr>
<tr><td>nanoResults.N_RTMP_STATUS_PLAY_STREAM_SEEK</td><td>The player is seeking.</td><td>PlayerState.SEEKING</td></tr>
<tr><td>nanoResults.N_RTMP_SEEK_NOT_AVAILABLE</td><td>The stream can not seek.</td><td></td></tr>
<tr><td>nanoResults.N_RTMP_SEEK_FAILED</td><td>The stream can not seek.</td><td></td></tr>
</tbody>
</table>
<h3><a class="anchor" aria-hidden="true" id="audio--video-format"></a><a href="#audio--video-format" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Audio / Video Format</h3>
<p>After the <code>NanostreamEvent.CODE_STREAM_AUDIO/VIDEO_FORMAT_AVAILABLE</code> event, you can get the MediaFormat Object with the <code>getAudio/VideoFormat()</code>[^(2)] function call.
We added two custom Fields for the Video MediaFormat:
    <code>NanostreamPlayer.KEY_ASPECT_RATIO_WIDTH</code>
    <code>NanostreamPlayer.KEY_ASPECT_RATIO_HEIGHT</code>
With these custom fields you can get the aspect ratio width and height.</p>
<pre><code class="hljs css language-java">MediaFormat videoFormat = mPlayer.getVideoFormat();

<span class="hljs-keyword">int</span> aspectRatioWidth = videoFormat.getInteger(NanostreamPlayer.KEY_ASPECT_RATIO_WIDTH);
<span class="hljs-keyword">int</span> aspectRatioHeight = videoFormat.getInteger(NanostreamPlayer.KEY_ASPECT_RATIO_HEIGHT);
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="implementation-example-10"></a><a href="#implementation-example-10" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementation Example</h3>
<pre><code class="hljs css language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PlayerActivity</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Activity</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">PlayerEventListener</span>, <span class="hljs-title">SurfaceHolder</span>.<span class="hljs-title">Callback</span> </span>{
    ...
    <span class="hljs-keyword">private</span> NanostreamPlayer mPlayer = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> String license = <span class="hljs-string">"YOUR LICENSE CODE"</span>;

    <span class="hljs-keyword">private</span> String strStreamUrl = <span class="hljs-string">"rtmp://192.168.1.100/vod"</span>;
    <span class="hljs-keyword">private</span> String strStreamname = <span class="hljs-string">"mp4:file.mp4"</span>;

    <span class="hljs-keyword">private</span> LinearLayout root;

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onCreate</span><span class="hljs-params">(Bundle savedInstanceState)</span> </span>{
        <span class="hljs-keyword">super</span>.onCreate(savedInstanceState);
        root = <span class="hljs-keyword">new</span> LinearLayout(<span class="hljs-keyword">this</span>);
        root.setOrientation(LinearLayout.VERTICAL);
        root.setLayoutParams(containerParams);
        root.setBackgroundColor(Color.BLACK);

        ...

        mPlayer = nanoStream.createNanostreamPlayer();

        PlayerSettings settings = mPlayer.<span class="hljs-keyword">new</span> PlayerSettings();

        settings.setLicense(license);
        settings.setUrl(strStreamUrl);
        settings.setStreamname(strStreamname);
        settings.setAuthUsername(<span class="hljs-string">""</span>);
        settings.setAuthPassword(<span class="hljs-string">""</span>);
        settings.setBufferTimeMs(<span class="hljs-number">2000</span>);

        mPlayer.setSettings(settings);
        mPlayer.setPlayerEventListener(<span class="hljs-keyword">this</span>);

        ...
        <span class="hljs-comment">// we need a surface Callback for the application</span>
        LinearLayout.LayoutParams surfaceParams = <span class="hljs-keyword">new</span> LinearLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.FILL_PARENT, <span class="hljs-number">0.5F</span>);
        surfaceParams.gravity = Gravity.CENTER;
        surfaceParams.weight = <span class="hljs-number">0.5f</span>;

        SurfaceView surfaceView = <span class="hljs-keyword">new</span> SurfaceView(<span class="hljs-keyword">this</span>);
        surfaceView.setLayoutParams(surfaceParams);
        surfaceView.getHolder.addCallback(<span class="hljs-keyword">this</span>);

        root.addView(surfaceView);
        setContentView(root);
    }

    ...

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onPlayerEvent</span><span class="hljs-params">(NanostreamEvent event, NanostreamPlayer instance)</span> </span>{
        <span class="hljs-keyword">final</span> String msg = event.GetDescription();
        Log.d(<span class="hljs-keyword">this</span>.getClass().getName(), event.GetDescription());
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">surfaceCreated</span><span class="hljs-params">(SurfaceHolder holder)</span> </span>{
        mPlayer.surfaceCreated(holder);

        <span class="hljs-keyword">try</span> {
            <span class="hljs-keyword">if</span> (!mPlayer.getState().equals(PlayerState.STARTED)) {
                mPlayer.start();
            }
        } <span class="hljs-keyword">catch</span> (IllegalStateException e) {
            e.printStackTrace();
        }
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">surfaceChanged</span><span class="hljs-params">(SurfaceHolder holder, <span class="hljs-keyword">int</span> format, <span class="hljs-keyword">int</span> width, <span class="hljs-keyword">int</span> height)</span> </span>{
        mPlayer.surfaceChanged(holder, format, width, height);
    }

    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">surfaceDestroyed</span><span class="hljs-params">(SurfaceHolder holder)</span> </span>{
        mPlayer.surfaceDestroyed(holder);
    }
}
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="logging--debugging"></a><a href="#logging--debugging" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Logging / Debugging</h2>
<p>If you encounter an issue, our support team is able to help.
Please send us the log file as explained in the following steps:</p>
<ul>
<li>Plug in the device and open Android Studio</li>
<li>In Android Studios Android Monitor</li>
</ul>
<ol>
<li>Clear the logcat output</li>
<li>Set the Log Level to <code>Verbose</code></li>
<li>Set the filter to <code>No Filters</code></li>
</ol>
<ul>
<li>Run the critical section</li>
<li>Mark the entire logcat output</li>
<li>Right click in the logcat View and <code>Copy as Plain Text</code></li>
<li>Open an editor of your choice</li>
<li>Paste the logcat output into the editor and Save the logcat output as .txt file</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="further-questions-would-you-like-a-feature-not-available-yet"></a><a href="#further-questions-would-you-like-a-feature-not-available-yet" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Further questions? Would you like a feature not available yet?</h2>
<p>We can make it work for you based on our consulting and development / implementation services. <a href="http://www.nanocosmos.de/v4/en/contact-form.html">Contact us</a></p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 8/16/2021</em></div><div class="docs-prevnext"></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#introduction">Introduction</a><ul class="toc-headings"><li><a href="#purpose">Purpose</a></li><li><a href="#requirements">Requirements</a></li><li><a href="#getting-started">Getting Started</a></li></ul></li><li><a href="#resolution-aspect-ratio-and-orientation">Resolution, Aspect Ratio and Orientation</a><ul class="toc-headings"><li><a href="#resolution">Resolution</a></li><li><a href="#aspect-ratio">Aspect Ratio</a></li><li><a href="#orientation">Orientation</a></li><li><a href="#example-combinations-of-aspect-ratios-and-orientations">Example Combinations of Aspect Ratios and Orientations</a></li><li><a href="#example">Example</a></li><li><a href="#implementation-example">Implementation Example</a></li></ul></li><li><a href="#stream-type">Stream Type</a><ul class="toc-headings"><li><a href="#implementation-example-1">Implementation Example</a></li></ul></li><li><a href="#server-authentication">Server Authentication</a><ul class="toc-headings"><li><a href="#implementation-example-2">Implementation Example</a></li></ul></li><li><a href="#local-recording">Local Recording</a><ul class="toc-headings"><li><a href="#description">Description</a></li><li><a href="#steps-to-configure-mp4-recording">Steps to configure MP4 recording</a></li><li><a href="#setrecordmp4boolean">setRecordMp4(boolean)</a></li><li><a href="#setmp4pathstring">setMp4Path(String)</a></li><li><a href="#android-permission">Android Permission</a></li><li><a href="#implementation-example-3">Implementation Example</a></li></ul></li><li><a href="#adaptive-bitrate-streaming">Adaptive Bitrate Streaming</a><ul class="toc-headings"><li><a href="#implementation-example-4">Implementation Example</a></li><li><a href="#measuring-the-available-bandwidth">Measuring the available bandwidth</a></li><li><a href="#implementation-example-6">Implementation Example</a></li></ul></li><li><a href="#camera-zoom">Camera Zoom</a><ul class="toc-headings"><li><a href="#description-1">Description</a></li></ul></li><li><a href="#camera-focus">Camera Focus</a><ul class="toc-headings"><li><a href="#description-2">Description</a></li><li><a href="#parameter-list">Parameter List</a></li><li><a href="#focuscallback-interface">FocusCallback interface</a></li><li><a href="#implementation-example-8">Implementation Example</a></li></ul></li><li><a href="#deviceproperties">DeviceProperties</a><ul class="toc-headings"><li><a href="#description-3">Description</a></li><li><a href="#implementation-example-9">Implementation Example</a></li></ul></li><li><a href="#rtmp-playback">RTMP Playback</a><ul class="toc-headings"><li><a href="#description-and-features">Description and Features</a></li><li><a href="#license">License</a></li><li><a href="#interface">Interface</a></li><li><a href="#creating-an-instance">Creating an Instance</a></li><li><a href="#configuration-and-settings">Configuration and Settings</a></li><li><a href="#playersettings">PlayerSettings:</a></li><li><a href="#player-state">Player State</a></li><li><a href="#event-notification">Event Notification</a></li><li><a href="#status-events">Status Events</a></li><li><a href="#results-and-error-events">Results and Error Events</a></li><li><a href="#audio--video-format">Audio / Video Format</a></li><li><a href="#implementation-example-10">Implementation Example</a></li></ul></li><li><a href="#logging--debugging">Logging / Debugging</a></li><li><a href="#further-questions-would-you-like-a-feature-not-available-yet">Further questions? Would you like a feature not available yet?</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Contact</h5><a href="https://www.nanocosmos.de/">Homepage</a><a href="https://www.nanocosmos.de/contact">Contact</a><a href="https://www.nanocosmos.de/support">Support</a><a href="https://www.nanocosmos.de/terms">Legal Terms</a></div><div><h5>Products</h5><a href="https://www.nanocosmos.de/cloud">Nanostream Cloud with Bintu.Live</a><a href="https://www.nanocosmos.de/h5live">H5Live Low Latency HTML5-Player</a><a href="https://www.nanocosmos.de/webrtc">nanoStream Webcaster</a><a href="https://www.nanocosmos.de/#nanostream">Nanostream Apps and SDK</a></div><div><h5>More</h5><a href="https://www.nanocosmos.de/blog/">Blog</a><a href="https://twitter.com/nanovideo">Twitter</a><a href="https://www.facebook.com/nanocosmos.net/">Facebook</a><a href="https://www.linkedin.com/company/nanocosmos-gmbh">LinkedIn</a><a href="https://github.com/nanocosmos/docs">GitHub</a><a class="github-button" href="https://github.com/nanocosmos/docs" data-icon="octicon-star" data-count-href="/nanocosmos/docs/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://nanocosmos.de/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/footer_logo.png" alt="nanocosmos GmbH" width="170" height="45"/></a><section class="copyright">Copyright © 2021 nanocosmos GmbH - doc version Mon Aug 16 2021 14:07:58 GMT+0000 (Coordinated Universal Time)</section></footer></div></body></html>